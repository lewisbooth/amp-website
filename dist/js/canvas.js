"use strict";function initCanvas(){window.innerWidth<=1020||(resizeCanvas(),setInterval(function(){canvas.classList.contains("hidden")||stepCanvas()},1e3/30),setInterval(function(){if(!canvas.classList.contains("hidden")){var n=Math.floor(getRandom(0,nodes.length-1));pulse(nodes[n][0],nodes[n][1])}},config.pulse.frequency))}function getRandom(n,e){return Math.random()*(e-n)+n}function getNodeQuantity(){return Math.floor(winX/500*config.nodes.density)}function getDistance(n,e,i,o){var s=Math.abs(n-i),t=Math.abs(e-o);return Math.sqrt(Math.pow(s,2)+Math.pow(t,2))}function addNodes(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments[1],i=arguments[2],o=0;o<n;o++){var s=getRandom(1,winX),t=getRandom(1,winY),a=getRandom(-config.nodes.speed,config.nodes.speed)+getRandom(-config.nodes.speedVariation,config.nodes.speedVariation),c=getRandom(-config.nodes.speed,config.nodes.speed)+getRandom(-config.nodes.speedVariation,config.nodes.speedVariation),d=getRandom(-config.nodes.sizeVariation,config.nodes.sizeVariation)+config.nodes.size,f=[e||s,i||t,a,c,d,1];nodes.push(f)}}function resizeCanvas(){var n=winX,e=winY;winX=window.innerWidth,winY=window.innerHeight;var i=winX/n,o=winY/e;nodes.forEach(function(n){n[0]*=i,n[1]*=o});var s=getNodeQuantity();s>nodes.length?addNodes(s-nodes.length):s<nodes.length&&nodes.splice(s-1),c.canvas.width=winX,c.canvas.height=winY}function stepCanvas(){c.clearRect(0,0,canvas.width,canvas.height),nodes.forEach(function(n){c.beginPath();var e=n[4]*n[5];c.arc(n[0],n[1],e,0,360);var i=2*(n[5]-1)+config.nodes.nodeOpacity;c.fillStyle="rgba(225,225,225,"+i+")",c.fill(),nodes.forEach(function(e){var i=getDistance(n[0],n[1],e[0],e[1]);if(i<config.nodes.linkLength){c.beginPath(),c.moveTo(n[0],n[1]),c.lineTo(e[0],e[1]);var o=config.nodes.linkOpacity-config.nodes.linkOpacity/config.nodes.linkLength*i;o*=Math.pow(n[5],2),c.strokeStyle="rgba(225,225,225,"+o+")",c.lineWidth=1.5,c.stroke()}})}),nodes.forEach(function(n){(n[0]+n[2]<0||n[0]+n[2]>winX)&&(n[2]=-n[2]),(n[1]+n[3]<0||n[1]+n[3]>winY)&&(n[3]=-n[3]),n[0]+=n[2],n[1]+=n[3],pulses.forEach(function(e){var i=getDistance(n[0],n[1],e[0],e[1]);if(i<e[2]){n[5]=1+e[3]*config.pulse.intensity}})}),pulses.forEach(function(n){n[2]+=config.pulse.speed/30;var e=1/(30*config.pulse.falloff/1e3);n[3]<=e?pulses.unshift():n[3]-=e})}function pulse(n,e){pulses.push([n,e,0,1])}var config={nodes:{density:40,size:2,sizeVariation:.5,nodeOpacity:.5,speed:1,speedVariation:1,linkLength:200,linkOpacity:.2},pulse:{frequency:4e3,intensity:3,speed:400,falloff:2e3}},canvas=document.querySelector("#canvas"),c=canvas.getContext("2d"),pulses=[],nodes=[],winX=window.innerWidth,winY=window.innerHeight;window.onresize=function(){window.innerWidth<=768||resizeCanvas()},document.addEventListener("click",function(n){if(!canvas.classList.contains("hidden")){var e=n.clientX,i=n.clientY;addNodes(1,e,i),pulse(e,i)}});